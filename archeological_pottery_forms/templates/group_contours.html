{% extends "base.html" %}
{% block content %}

{% if user.is_authenticated %}
<div class="container">
    <br>
    <div class="row align-items-start">
        <div class="col">
            {% if correlated_contours %}
            <form action="" method="post">
                {% csrf_token %}
                <label for="my_ceramic"><strong>pasirinkite radinį:</strong></label>
                <br>
                <p>koreliacijos koef. (išorinis kontūras) | koreliacijos koef. (radinio storis) | lygintas radinio ilgis </p>
                <select class="col" name="my_ceramic" id="my_ceramic" multiple>
                    {% for item in correlated_contours %}
                    <option value="{{item.find_1}} {{item.find_2}}"> {{item.correlation_x}} | {{item.correlation_width}} | {{item.length_compared}}</option>
                    {% endfor %}
                </select>
                <br>
                <br>
                <button type="submit" class="btn btn-primary register-button" id="submit1" name="submit_show">Parodyti profilį</button>
                <br>
                <br>
                {% if other_contour_id %}
                <button type="submit" class="btn btn-primary register-button" id="submit2" name="submit_group" value="{{other_contour_id}}">Grupuoti</button>
                <button type="submit" class="btn btn-primary register-button" id="submit3" name="submit_nogroup" value="{{other_contour_id}}">NEgrupuoti</button>
                {% endif %}
            </form>
            {% endif %}
        </div>
        <div class="col">
            <canvas id="myCanvas" width="500" height="500" class="border"></canvas>
            <script>
                    var canvas = document.getElementById("myCanvas");
                    var ctx = canvas.getContext("2d");
                    ctx.scale(0.5, 0.5);
                    {% if this_contour %}
                        {% for pixel in this_contour %}
                            ctx.fillRect({{pixel.x_canvas_middle}}, {{pixel.y}},2,2);
                        {% endfor %}
                    {% endif %}
                    {% if other_contour %}
                        ctx.fillStyle = 'rgba(255, 0, 0, 0.5)'
                        {% for pixel in other_contour %}
                            ctx.fillRect({{pixel.x_canvas_middle}}, {{pixel.y}},2,2);
                        {% endfor %}
                    {% endif %}
            </script>
        </div>
    </div>

</div>
{% endif %}

{% endblock %}